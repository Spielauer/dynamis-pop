//LABEL (FamilyLeavingHome, EN) Leaving Home
/* NOTE(FamilyLeavingHome, EN) Leaving Home
Chidren leave home is triggered by three events:

- reaching the maximum age of living with parents set as a parameter
- at union formation 
- giving birth

After leaving home is final and the links to the most current (social) parent(s) is removed.
*/

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Parameters
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

parameters
{
    double AgeLeavingHome;                              //EN Age leaving home
};

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Actor states and events
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

actor Person
{
    event timeLeavingHomeEvent, LeavingHomeEvent;       //EN Leaving home event
};

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Implementation
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

TIME Person::timeLeavingHomeEvent()
{
    if (family_role == FR_CHILD) return time_of_birth + AgeLeavingHome;
    else return TIME_INFINITE;
}

void Person::LeavingHomeEvent()
{
    doLeaveParentalHome();
}